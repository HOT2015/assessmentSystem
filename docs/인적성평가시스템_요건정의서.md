# 인적성 평가시스템 요건정의서 (최신 버전 v2.2)

## 1. 프로젝트 개요

### 1.1 프로젝트명
**통합 온라인 인적성 평가시스템 - 최신 버전 v2.2**

### 1.2 프로젝트 목적
- 기술 역량 + 문제 해결력을 통합적으로 평가하는 온라인 시스템 구현
- 자동 채점과 기본 리포트 생성으로 평가 프로세스 자동화
- 신입/경력 개발자 대상 기본 평가 제공
- 실시간 검증 및 사용자 친화적 인터페이스 제공
- **엑셀/워드 파일을 통한 문제 일괄 등록 기능 제공**
- 🆕 **회사 로고/정보 관리로 맞춤형 브랜드 경험 제공**
- 🆕 **카테고리별 문제 선택 및 랜덤 생성 기능**
- 🆕 **지원자 정보 수정 시 문제 재설정 기능**

### 1.3 주요 가치
- 객관적이고 일관된 평가 기준 제공
- 시간과 비용 효율적인 평가 프로세스
- 기본적인 데이터 기반 의사결정 지원
- 실시간 피드백으로 사용자 경험 향상
- **대량 문제 등록을 통한 관리 효율성 증대**
- 🆕 **기업별 맞춤형 UI/UX 제공**
- 🆕 **유연한 문제 선택 및 관리 시스템**

---

## 2. 시스템 요구사항 (최신 버전 v2.2)

### 2.1 기능적 요구사항

#### 2.1.1 사용자 관리 (고도화 완료)
- **지원자 등록**
  - 이름, 이메일, 핸드폰번호 입력
  - **실시간 이름 검증**: 이름 입력 시 즉시 사전 등록 여부 확인
  - 관리자가 사전에 등록한 이름과 일치해야만 문제풀이 가능 (이름만 사전등록)
  - 지원자별 접속 가능 날짜 설정 (특정 날짜에만 접속 가능, 예: 2024-07-01)
  - 지원자별 문제풀이 시간 설정 (기본 10분, 개별 설정 가능)
  - 지원자 고유 ID 생성
  - **동적 폼 제어**: 유효한 이름 입력 시에만 다른 필드 활성화
  - 🆕 **카테고리별 문제 선택**: 기술/문제해결 카테고리별로 개별 문제 선택 가능
  - 🆕 **랜덤 문제 생성**: 카테고리별로 랜덤 문제 자동 선택 가능
  - 🆕 **문제 선택 없이도 등록 가능**: 문제를 선택하지 않아도 지원자 등록 가능
- **지원자-문제 매칭 및 문제할당 저장**
  - 관리자 화면에서 지원자별로 문제를 직접 선택 및 할당할 수 있다.
  - 문제 선택 후 "변경사항 저장" 버튼을 누르면 해당 지원자에게 선택된 문제가 즉시 저장되어야 한다.
  - 저장 시 `/api/candidate/<candidate_id>/questions/update` API를 통해 지원자별 문제 목록이 갱신된다.
  - 저장 성공 시 "성공적으로 저장되었습니다." 등 명확한 피드백을 제공해야 한다.
  - 저장 실패 시 오류 메시지를 명확하게 안내해야 한다.
  - 문제 할당 내역은 candidates.json에 즉시 반영되어야 한다.
  - 저장 동작은 실시간(1초 이내)으로 처리되어야 하며, 데이터 무결성을 보장해야 한다.
  - **지원자 등록/수정 시 부서(department_id) 지정이 필수이다. 부서가 지정되지 않은 지원자는 문제를 할당하거나 저장할 수 없다.**
  - **기존 지원자 데이터에 부서가 없는 경우, 시스템은 자동으로 기본 부서(dept_1 등)를 할당한다.**

- **관리자 기능**
  - 지원자 이름 목록만 사전 등록
  - **지원자 삭제 기능**: 안전한 삭제 및 관련 데이터 정리
  - **지원자 정보 수정 기능**: 이름, 접속 가능 날짜, 문제풀이 시간 수정
  - 🆕 **지원자 문제 재설정 기능**: 수정 시 기존 문제 변경 및 새로운 문제 선택 가능
  - 지원자별 접속 가능 날짜 및 문제풀이 시간 설정
  - 출제 문제 관리 (생성, 수정, 삭제)
  - 기본 평가 결과 확인
  - 지원자가 실제로 작성한 답변을 문제풀이 화면에서 확인 (문제별 답변 상세 조회 기능)
  - **대시보드 통계**: 총 지원자, 평가 완료, 미완료, 평균 점수 표시
  - **상위 5명 및 점수 분포**: 시각적 통계 제공
  - 🆕 **회사 정보/로고 관리**: 관리자 페이지에서 회사명, 설명, 로고 업로드 및 미리보기, 로고 제거 기능

#### 2.1.2 평가 시스템 (핵심 기능 완료)
- **기술 지식 평가**
  - 객관식 문제 (Java, DB 기본 문제 5개)
  - 주관식 문제 (간단한 코딩 문제 2개)
  - 난이도: 초급/중급

- **문제 해결력 평가**
  - 시나리오 기반 문제 3개
  - 객관식 형태로 응답

- **타이머 기능**
  - 문제풀이 시간 종료 후 30초 추가 시간 제공
  - 30초 후 자동 제출 및 경고 기능
  - 실시간 타이머 표시

#### 2.1.3 자동 채점 시스템 (기본 완료)
- **객관식 자동 채점**
  - 정답 비교 기반 즉시 채점
  - 기본 점수 부여

- **주관식 자동 채점**
  - 키워드 매칭 기반 채점
  - 기본 정확도 평가

#### 2.1.4 리포트 생성 (기본 완료)
- **개인별 기본 리포트**
  - 영역별 점수 및 백분율
  - 총점 및 순위
  - 기본 피드백 제공

#### 2.1.5 출제 문제 관리 (관리자 전용 - 고도화 완료)
- **문제 생성**
  - 카테고리 선택 (기술/문제해결)
  - 문제 유형 선택 (객관식/주관식)
  - 난이도 설정 (초급/중급)
  - 문제 내용 및 선택지 입력
  - 정답 및 배점 설정

- **문제 수정**
  - 기존 문제 내용 수정
  - 선택지 및 정답 변경
  - 난이도 및 배점 조정

- **문제 삭제**
  - 개별 문제 삭제
  - 삭제 전 확인 절차

- **문제 목록 관리**
  - 전체 문제 목록 조회
  - 카테고리별 문제 필터링
  - 문제 검색 기능

- **🆕 카테고리별 문제 선택 시스템 (신규 추가)**
  - **기술 문제 선택**: Java, Database 카테고리별 개별 문제 선택
  - **문제해결 문제 선택**: 문제해결 카테고리별 개별 문제 선택
  - **랜덤 문제 생성**: 카테고리별로 지정된 개수만큼 랜덤 선택
  - **문제 미선택 허용**: 문제를 선택하지 않아도 지원자 등록 가능
  - **문제 선택 상태 표시**: 선택된 문제 개수 및 카테고리별 현황 표시

- **🆕 엑셀/워드 파일 업로드 기능 (신규 추가)**
  - **엑셀 파일(.xlsx) 업로드**: 표 형식으로 문제 일괄 등록
  - **워드 파일(.docx) 업로드**: 텍스트 형식으로 문제 일괄 등록
  - **샘플 파일 다운로드**: 엑셀/워드 작성 방법 안내
  - **파일 검증**: 업로드 전 형식 및 내용 검증
  - **중복 처리**: 기존 문제와의 중복 확인 및 덮어쓰기 옵션
  - **진행률 표시**: 업로드 진행 상황 실시간 확인
  - **결과 상세 표시**: 추가/업데이트/오류 정보 제공

### 2.2 비기능적 요구사항

#### 2.2.1 성능 요구사항
- 동시 접속자 5명 지원
- 페이지 로딩 시간 5초 이내
- 평가 완료 시간 15분 (고정)
- 실시간 검증 응답 시간 1초 이내
- **파일 업로드 처리 시간 30초 이내**

#### 2.2.2 보안 요구사항
- 기본 세션 관리
- 간단한 접근 제어
- **데이터 무결성**: NoneType 오류 방지 및 안전한 데이터 처리
- **파일 업로드 보안**: 파일 형식 검증 및 크기 제한 (10MB)

#### 2.2.3 사용성 요구사항
- 직관적인 사용자 인터페이스
- 기본 반응형 웹 디자인
- **실시간 피드백**: 즉시적인 사용자 응답
- **접근성**: 명확한 시각적 피드백 및 오류 메시지
- **브라우저 경고 제거**: 페이지 이동 시 불필요한 경고 메시지 제거
- 🆕 **회사 로고/정보 실시간 미리보기**

---

## 3. 시스템 아키텍처

### 3.1 기술 스택
- **Backend**: Python (Flask)
- **Frontend**: HTML, CSS, JavaScript (Bootstrap, FontAwesome)
- **Database**: JSON 파일 기반 (SQLite 대신)
- **Data Format**: JSON
- **🆕 파일 처리**: pandas, openpyxl, python-docx

### 3.2 시스템 구조
```
인적성평가시스템/
├── app.py              # 메인 Flask 앱 (API 엔드포인트 포함)
├── models.py           # 데이터 모델 (Candidate, Question, TestResult, DataManager)
├── templates/          # HTML 템플릿
│   ├── base.html       # 기본 레이아웃
│   ├── index.html      # 메인 페이지
│   ├── register.html   # 지원자 등록 (실시간 검증 포함)
│   ├── test_start.html # 평가 시작 페이지
│   ├── technical_test.html # 기술 평가 페이지
│   ├── problem_solving_test.html # 문제해결력 평가 페이지
│   ├── result.html     # 결과 페이지
│   ├── admin.html      # 관리자 페이지 (대시보드 포함)
│   ├── admin_answer_detail.html # 답안 상세 페이지
│   ├── question_manage.html  # 문제 관리 페이지 (파일 업로드 포함)
│   └── question_edit.html    # 문제 편집 페이지
├── data/               # JSON 데이터 파일
│   ├── candidates.json # 지원자 데이터
│   ├── questions.json  # 문제 데이터
│   └── results.json    # 결과 데이터
├── static/images/      # 🆕 회사 로고/이미지 폴더
├── uploads/            # 🆕 파일 업로드 임시 폴더
├── requirements.txt    # 의존성 (업데이트됨)
└── README.md          # 프로젝트 설명
```

---

## 4. 데이터 모델 설계

### 4.1 지원자 (Candidate)
```json
{
  "id": "고유ID (UUID)",
  "name": "이름",
  "email": "이메일",
  "phone": "핸드폰번호",
  "created_at": "등록일시 (ISO 형식)",
  "test_deadline": "평가완료시간 (ISO 형식)",
  "access_date": "접속 가능 날짜 (YYYY-MM-DD)",
  "test_duration": "문제풀이 시간 (분)",
  "selected_questions": ["선택된 문제 ID 목록"]
}
```

### 4.2 문제 (Question)
```json
{
  "id": "문제ID",
  "category": "카테고리(Java/Database/문제해결)",
  "type": "유형(객관식/주관식)",
  "difficulty": "난이도(초급/중급)",
  "question": "문제내용",
  "options": ["선택지"],
  "correct_answer": "정답",
  "keywords": ["키워드 (주관식용)"],
  "points": "배점"
}
```

### 4.3 평가 결과 (TestResult)
```json
{
  "candidate_id": "지원자ID",
  "test_date": "평가일시 (ISO 형식)",
  "answers": {"문제ID": "답안"},
  "scores": {
    "technical": "기술점수",
    "problem_solving": "문제해결점수"
  },
  "total_score": "총점",
  "rank": "순위"
}
```

---

## 5. 평가 프로세스

### 5.1 평가 흐름
1. **지원자 등록** → 실시간 이름 검증 → 이메일, 핸드폰번호 입력
2. **평가 시작** → 완료시간 체크 후 문제 순차 진행
3. **기술 평가** → 객관식 5개 + 주관식 2개 (타이머 포함)
4. **문제해결력 평가** → 객관식 3개 (타이머 포함)
5. **자동 채점** → 즉시 결과 계산
6. **기본 리포트 생성** → 점수 및 순위 표시

### 5.2 평가 시간 배분
- **기술 평가**: 설정된 시간 (기본 10분)
- **문제해결력 평가**: 설정된 시간 (기본 10분)
- **추가 시간**: 문제풀이 시간 종료 후 30초
- **총 평가 시간**: 개별 설정 가능

### 5.3 문제 구성
- **기술 객관식**: 5문제 (Java 2개, DB 3개)
- **기술 주관식**: 2문제 (간단한 코딩 문제)
- **문제해결력**: 3문제 (시나리오 기반 객관식)
- **총 문제 수**: 10문제

---

## 6. 최신 기능 및 개선사항 (v2.2)

### 6.1 실시간 이름 검증 시스템
- **API 엔드포인트**: `/api/check_name`
- **검증 로직**: 사전 등록된 이름 확인 + 접속 가능 날짜 검증
- **사용자 경험**: 타이핑 중 API 호출 최적화 (500ms 지연)
- **시각적 피드백**: 성공/실패/로딩 상태 표시

### 6.2 관리자 대시보드 개선
- **통계 카드**: 총 지원자, 평가 완료, 미완료, 평균 점수
- **상위 5명**: 순위별 지원자 목록
- **점수 분포**: 우수/양호/보통/개선 필요 구분
- **실시간 데이터**: 페이지 새로고침 시 최신 정보 반영

### 6.3 데이터 안정성 개선
- **NoneType 오류 방지**: 모든 슬라이싱 연산에 안전장치 추가
- **데이터 무결성**: JSON 로드/저장 시 예외 처리 강화
- **ID 관리**: Candidate 객체 생성 시 ID 필드 명시적 설정

### 6.4 사용자 인터페이스 개선
- **동적 폼 제어**: 유효한 이름 입력 시에만 다른 필드 활성화
- **타이머 기능**: 실시간 카운트다운 및 자동 제출
- **반응형 디자인**: Bootstrap 기반 모바일 친화적 레이아웃
- **접근성**: 명확한 시각적 피드백 및 오류 메시지
- **🆕 브라우저 경고 제거**: 페이지 이동 시 불필요한 경고 메시지 제거
- 🆕 **회사 로고/정보 관리**: 관리자에서 로고 업로드, 미리보기, 제거, 회사명/설명 관리

### 6.5 🆕 엑셀/워드 파일 업로드 시스템 (신규 기능)
- **엑셀 파일 지원**: .xlsx 형식 파일 업로드 및 파싱
- **워드 파일 지원**: .docx 형식 파일 업로드 및 파싱
- **샘플 파일 제공**: 작성 방법 안내 및 예시 포함
- **파일 검증**: 형식, 크기, 내용 검증 (최대 10MB)
- **중복 처리**: 기존 문제와의 중복 확인 및 덮어쓰기 옵션
- **진행률 표시**: 업로드 진행 상황 실시간 확인
- **결과 상세 표시**: 추가/업데이트/오류 정보 제공
- **검증 모드**: 실제 추가 없이 파일 검증만 수행

#### 6.5.1 엑셀 파일 형식
```
카테고리 | 유형 | 난이도 | 문제 | 배점 | 선택지1 | 선택지2 | 선택지3 | 선택지4 | 정답 | 키워드
Java     | 객관식 | 초급 | Java에서 변수를 선언하는 키워드는? | 10 | var | let | const | variable | var | 
```

#### 6.5.2 워드 파일 형식
```
Java|객관식|초급|Java에서 변수를 선언하는 키워드는?
1. var
2. let
3. const
4. variable
정답: var
```

---

## 7. API 엔드포인트

### 7.1 지원자 관리
- `POST /register` - 지원자 등록
- `POST /api/check_name` - 실시간 이름 검증
- `GET /test/start` - 평가 시작 페이지
- `GET /test/technical` - 기술 평가
- `GET /test/problem_solving` - 문제해결력 평가
- `POST /submit_answers` - 답안 제출

### 7.2 관리자 기능
- `GET /admin` - 관리자 대시보드
- `POST /admin/candidate/add` - 지원자 추가
- `DELETE /admin/candidate/delete/<id>` - 지원자 삭제
- `PUT /admin/candidate/deadline/<id>` - 평가완료시간 설정
- `GET /admin/answer/<id>` - 답안 상세 조회
- `PUT /admin/candidate/edit/<id>` - 지원자 정보 수정
- `POST /admin/company/settings` - 회사 정보/로고 설정
- `GET /api/random_questions` - 랜덤 문제 선택 API

### 7.3 문제 관리
- `GET /admin/questions` - 문제 관리 페이지
- `POST /admin/questions/add` - 문제 추가
- `PUT /admin/questions/edit/<id>` - 문제 수정
- `DELETE /admin/questions/delete/<id>` - 문제 삭제
- `POST /admin/questions/upload` - 파일로 문제 업로드
- `GET /download_sample_excel` - 엑셀 샘플 파일 다운로드
- `GET /download_sample_word` - 워드 샘플 파일 다운로드

---

## 8. 성공 지표

### 8.1 정량적 지표
- 평가 완료율 80% 이상
- 시스템 안정성 95% 이상
- 기본 기능 동작률 100%
- 실시간 검증 응답률 99% 이상
- **파일 업로드 성공률 90% 이상**

### 8.2 정성적 지표
- 사용자 친화적 인터페이스
- 실시간 피드백 제공
- 안정적인 데이터 처리
- 확장 가능한 코드 구조
- **대량 문제 등록 효율성 증대**
- 🆕 **기업별 맞춤형 UI/UX 경험**

---

## 9. 향후 확장 계획

### 9.1 단기 개선 (1-2개월)
- 고급 분석 및 통계 기능
- 그래프 시각화 (Chart.js 등)
- 이메일 알림 시스템
- 백업 및 복구 기능
- **CSV 파일 업로드 지원 추가**

### 9.2 중기 확장 (3-6개월)
- 상세한 인성 검사 모듈
- 복잡한 주관식 채점 알고리즘
- 다국어 지원
- 모바일 앱 개발
- **문제 템플릿 시스템 구축**

### 9.3 장기 비전 (6개월 이상)
- 실시간 협업 기능
- 고급 보안 기능
- 클라우드 배포 및 확장성
- **문제 품질 자동 평가 시스템**

---

## 10. 설치 및 실행 가이드

### 10.1 필수 패키지 설치
```bash
pip install -r requirements.txt
```

### 10.2 필요한 패키지 목록
```
Flask==2.3.3
Flask-SQLAlchemy==3.0.5
Werkzeug==2.3.7
Jinja2==3.1.2
openpyxl==3.1.2      # 🆕 엑셀 파일 처리
python-docx==0.8.11   # 🆕 워드 파일 처리
pandas==2.0.3         # 🆕 데이터 처리
```

### 10.3 실행 방법
```bash
cd 인적성평가시스템
python app.py
```

### 10.4 접속 주소
- **메인 페이지**: http://localhost:5000
- **관리자 페이지**: http://localhost:5000/admin
- **문제 관리**: http://localhost:5000/admin/questions

---

## 11. 변경 이력

### v2.2 (2024-12-19)
- 🆕 카테고리별 문제 선택 기능 추가
- 🆕 랜덤 문제 생성 기능 추가 (카테고리별 설정 가능)
- 🆕 문제 선택 없이도 지원자 등록 가능하도록 개선
- 🆕 지원자 수정 시 문제 재설정 기능 추가
- 🆕 문제 선택 상태 표시 기능 추가
- 🔧 사용자 인터페이스 개선

### v2.1 (2024-12-19)
- 🔧 시스템 안정성 개선
- 🔧 코드 최적화

### v2.0 (2024-12-19)
- 🆕 엑셀/워드 파일 업로드 기능 추가
- 🆕 샘플 파일 다운로드 기능 추가
- 🆕 파일 업로드 진행률 표시 기능 추가
- 🆕 브라우저 경고 메시지 제거
- 🔧 데이터 안정성 개선
- 🔧 사용자 인터페이스 개선

### v1.0 (2024-12-18)
- 초기 시스템 구축
- 기본 평가 기능 구현
- 관리자 대시보드 구현

</rewritten_file> 